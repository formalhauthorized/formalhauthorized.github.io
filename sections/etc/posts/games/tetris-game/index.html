<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>*{box-sizing:border-box;margin:0;padding:0}html{width:100vw;width:-moz-available;width:-webkit-fill-available;min-height:100vh;min-height:-moz-available;min-height:-webkit-fill-available}body{--background-color: #f4f4f4;--text-color: black;--text-on-primary: black;width:100%;height:100%;color:var(--text-color);font-family:Menlo,Courier,Arial,Helvetica,sans-serif}h1{margin-bottom:1.5rem}a{color:inherit;text-decoration:none}a:hover{background:rgba(0,0,0,.1);cursor:pointer}ul{list-style-type:none}ul,ol{list-style-position:inside}button{cursor:pointer;font-size:1em;background-color:#35e872;color:#fff;font-family:inherit;border-style:none;padding:.5em 1em}blockquote{border-left:12px solid #ddd;margin-bottom:1.2rem;padding:.5rem}blockquote p{display:inline;margin:0px;padding:0px}body.dark-mode{--background-color: #111;--text-color: #dadada}.dark-mode img{filter:grayscale(20%)}.dark-mode .post-screen a:hover{background:hsla(0,0%,100%,.1)}.dark-mode blockquote{border-left:12px solid #333}.menu-screen{min-height:100vh;min-height:-webkit-fill-available;background-color:#008529;color:var(--text-on-primary);position:relative}.logo{font-family:"Times New Roman",Times,Georgia,serif;transform-origin:top right;transform:rotate(-90deg);position:absolute;top:0px;right:5%}.logo a{padding:10px}.logo a:hover{background-color:#000;color:#fff}.menu-container{min-height:100vh;display:flex;flex-direction:column;justify-content:flex-start;padding:5%}.nav_language{margin-top:1rem}.nav_language li{text-transform:uppercase;display:inline}.nav_language .selected{text-decoration:underline}.nav_language li:not(:first-child):before{content:" / "}.nav_category{padding-top:1rem;margin-top:10vh;margin-bottom:auto}.nav_category .category_list{border-bottom:solid 2px var(--text-on-primary)}.nav_category .category_list li{border-top:dashed 1px var(--text-on-primary);line-height:200%}.nav_category .category_list>li:first-child{border-top:solid 2px var(--text-on-primary)}.darkmode__toggle{margin-top:1rem;margin-bottom:2rem}.darkmode__star{font-size:2em;text-align:center}.darkmode__text:hover{cursor:pointer}.external-link:hover{cursor:alias}.post-screen{min-height:100vh;background-color:var(--background-color);padding:5%;font-family:"Times New Roman",Times,Georgia,serif;display:flex;flex-direction:column;justify-content:space-between}.post-screen img{max-width:100%;max-height:100%;display:block}.path__link a{margin-right:1rem}.path__link a:not(:first-child){margin-left:1rem}.content__post h2{padding-top:.7rem}.content__post .content__path{border-bottom:solid 1px var(--text-color)}.content__post .content__time{font-size:.9em;text-align:end}.content__post .content__content{margin-top:4rem}.content__post .content__content h1,.content__post .content__content h2,.content__post .content__content h3,.content__post .content__content h4{margin-top:1rem;margin-bottom:1rem}.content__post .content__content a{text-decoration:underline}.content__post .content__content p{padding-bottom:1rem}.content__post .content__content ol,.content__post .content__content ul{padding-bottom:1rem}.content__category .content__category__list{border-top:solid 2px var(--text-color);border-bottom:solid 2px var(--text-color)}.content__category .content__category__list li{text-indent:1em;line-height:180%;text-transform:capitalize}.content__category .content__category__list li:not(:first-child){border-top:dashed 1px var(--text-color)}.category__table{width:100%;border-collapse:collapse;border-top:solid 2px var(--text-color);border-bottom:solid 2px var(--text-color)}.category__table tr{text-indent:1em;line-height:180%;text-transform:capitalize;border-bottom:dashed 1px var(--text-color)}.category__table tr td:nth-child(2){text-align:center}.category__table th{border-bottom:solid 1px var(--text-color)}.page__container h1,.page__container h2,.page__container h3{text-transform:capitalize}.page__container .page__container__title{border-bottom:solid 2px var(--text-color)}.page__container .content__time{text-align:end;font-size:.9em;padding-bottom:1rem}.page__container a{text-decoration:underline}.page__container .page__div{margin-bottom:2rem}.page__container .search__tags ul{display:grid;grid-template-rows:repeat(20, min-content);grid-auto-flow:column}.page__container p{margin-bottom:1rem}.post__tag__list{margin-top:4rem;font-size:.9em;text-align:right}.search__ui{background-color:#35e872;border-radius:3px}.search__toggle__off{background-color:rgba(0,0,0,0)}.search__toggle__off .search__toggle{display:none}.search__toggle__off .search__results__container{display:none}.search__icon__input{margin-top:.5rem;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.search__icon__input .search__icon__container a{display:inline-block}.search__icon__input .search__icon__container .search__icon{fill:#000;padding-top:.5rem;width:2.5em;height:2.5em}.search__icon__input .search__toggle{flex-grow:1;margin-left:.5rem;margin-right:.5rem}.search__icon__input .search__toggle input{width:100%;line-height:1.3rem}.search__results__container .search__results{padding-left:3rem;font-family:"Times New Roman",Times,Georgia,serif}.search__results__container .search__results li{padding-bottom:.3rem;margin-right:.3rem;white-space:nowrap;overflow:hidden}.search__results__container .search__results li .search__result__title{text-transform:capitalize}.search__results__container .search__results li .search__result__desc::before{content:"";margin-right:1rem}.search__results__container .search__results li .search__result__desc{opacity:.6}.search__container .search__title{border-bottom:solid 2px var(--text-color);text-transform:uppercase}.search__container input{display:block;width:100%;margin:1rem 0rem;line-height:1.3rem}.search__container .search__tags{margin-top:3rem}.search__container .search__tags h2{margin-bottom:.5rem}.search__container .search__tags ul{margin:.7rem;list-style-type:disc}.search__container .search__tags ul li{padding:.2rem}.footer{border-top:solid 1px var(--text-color);margin-top:3rem;padding:.8rem 1rem 0rem}.footer .footer__container{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;font-size:.7em}.footer .footer__container .footer__column *{display:inline;line-height:1.3em}.footer .footer__container .footer__column * li:before{content:" ";margin-left:.2rem}.footer .footer__title{margin-right:.2rem;font-weight:bold}@media(max-height: 800px){.nav_category{margin-top:calc(10vh*.5)}}@media(min-width: 900px){.whole-container{display:flex;position:relative}.menu-screen{height:fit-content;height:-moz-fit-content;width:50%;position:sticky;top:0}.menu-container{min-height:100vh}.post-screen{width:50%;padding:calc(5%*.5)}}pre{border-radius:5px;background:hsl(0,0%,88.031372549%);border:1px solid hsl(0,0%,74.8266666667%);border-left:3px solid rgb(0,126.35,38.95);color:hsl(0,0%,30%);page-break-inside:avoid;font-family:monospace,Menlo,Monaco,Consolas;font-size:.95em;line-height:1.2;border-radius:5px;margin-bottom:1.6em;max-width:100%;overflow:auto;padding:.8rem 1.5rem;display:block;word-wrap:break-word;position:relative}code{background:hsl(0,0%,88.031372549%);padding:.1em .5em;border-radius:3px;border:1px solid hsl(0,0%,74.8266666667%)}pre code{background:hsl(0,0%,88.031372549%);border:none;padding:0em}.dark-mode pre{background:hsl(0,0%,16%);color:rgb(196.2,196.2,196.2);border:1px solid hsl(0,0%,32.8%);border-left:3px solid rgb(0,126.35,38.95)}.dark-mode code{background:hsl(0,0%,16%);border:1px solid hsl(0,0%,24.4%)}.dark-mode pre code{color:inherit;background:rgba(0,0,0,0);border:none}pre:hover,pre:focus{border-left:3px solid #338df3}.codeButton{background-color:rgba(0,0,0,0);-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2x;border:1px solid;display:inline-block;cursor:pointer;color:rgb(0,126.35,38.95);font-family:Arial;font-size:14px;padding:2px 2px;text-decoration:none;margin:2px 2px}.codeButton:hover{background-color:rgb(0,126.35,38.95);color:#000}.codeButton:active{background-color:#338df3;border:1px solid #338df3}pre .codeButton{position:absolute;top:4px;right:4px}</style><title>Tetris game</title><meta name="description" content="Blog by Formalhauthorized"><link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link rel="manifest" href="/images/favicons/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/images/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"></head><body><div class="whole-container"><div class="menu-screen"><div class="logo"><a href="/index.html">formalhauthorized</a></div><div class="menu-container"><div class="menutitle"><h1><a href="/etc/index.html">Formalhauthorized Blog</a></h1><p>a blog<br>by formalhauthorized</p><ul class="nav_language"><li><a href="/dev/" class="nav_language_a"><span class="not_selected">dev</span></a></li><li><a href="/etc/" class="nav_language_a"><span class="selected">etc</span></a></li></ul></div><div class="nav_category"><h4>CATEGORY</h4><div class="categories"><ul class="category_list"><li style="text-indent:0em">- <a href="/etc/all/">All</a><ul><li style="text-indent:1.5em">- <a href="/etc/all/games/">Games</a></li></ul></li></ul></div><div class="search__ui search__toggle__off"><div class="search__icon__input"><div class="search__icon__container"><a href="/etc/search/" id="search-link" data-section="etc"><span><svg role="img" aria-label="Search" class="search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18px" height="18px"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span></a></div><div class="search__toggle"><input id="search__str" class="search__str"></div></div><div class="search__results__container"><ol class="search__results"><ol></ol></ol></div></div></div><div class="darkmode__toggle"><p class="darkmode__star"><span class="darkmode__text">&star;</span></p></div></div></div><div class="post-screen"><div class="content"><div class="content__post"><p class="path__link content__path"><a href="/etc/all/">All</a> > <a href="/etc/all/games/">Games</a></p><h2 class="content__title">Tetris Game</h2><p class="content__time"><time datetime="2025-07-18">18 July 2025</time></p><div class="content__content">AI generated<style>.tetris-wrapper{
  display:flex;
  gap:1rem;
  justify-content:center;
  align-items:flex-start;
  flex-wrap:wrap;
  font-family:sans-serif;
  color:var(--tetris-text,#222);
  background:var(--tetris-bg,#fafafa);
  padding:1rem;
  border:1px solid var(--tetris-border,#ccc);
  border-radius:4px;
}
.tetris-canvas{border:2px solid #333;background:#000;}
.tetris-side{width:120px;font-size:.9rem}
.tetris-side h3{margin:.3rem 0;font-size:1rem}
.tetris-next canvas{background:#000;border:1px solid #222;margin-bottom:.5rem}
.tetris-controls{font-size:.75rem;margin-top:.5rem;color:#555}</style><div class="tetris-wrapper"><canvas id="tetris-board" class="tetris-canvas" width="300" height="600"></canvas><div class="tetris-side"><h3>Score <span id="tetris-score">0</span></h3><h3>Level <span id="tetris-level">0</span></h3><h3>Lines <span id="tetris-lines">0</span></h3><div class="tetris-next"><h3>Next</h3><canvas id="tetris-next" width="120" height="120"></canvas></div><div class="tetris-controls">← → move<br>↓ soft drop<br>↑ rotate<br>space hard drop<br>C hold</div></div></div><script>(()=>{
  /* ---------- config ---------- */
  const COLS=10, ROWS=20, SIZE=30;          // board = 300×600
  const colors=[
    null,
    '#ff0d72','#0dc2ff','#0dff72','#f538ff',
    '#ff8e0d','#ffe138','#3877ff'
  ];
  const shapes=[
    null,
    [[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]], // I
    [[1,1],[1,1]],                               // O
    [[0,1,0],[1,1,1],[0,0,0]],                   // T
    [[0,1,1],[1,1,0],[0,0,0]],                   // S
    [[1,1,0],[0,1,1],[0,0,0]],                   // Z
    [[1,0,0],[1,1,1],[0,0,0]],                   // J
    [[0,0,1],[1,1,1],[0,0,0]]                    // L
  ];

  /* ---------- canvas setup ---------- */
  const cvs=document.getElementById('tetris-board');
  const ctx=cvs.getContext('2d');
  const nxt=document.getElementById('tetris-next');
  const nctx=nxt.getContext('2d');
  ctx.scale(SIZE,SIZE); nctx.scale(SIZE,SIZE);

  /* ---------- game state ---------- */
  let board=Array.from({length:ROWS},()=>Array(COLS).fill(0));
  let piece, next, hold, canHold=true;
  let score=0, lines=0, level=0;
  let dropInterval, lastTime=0;

  /* ---------- helpers ---------- */
  const createPiece=()=>Math.floor(Math.random()*7)+1;
  const drawSquare=(x,y,color,ctx)=>{ctx.fillStyle=color;ctx.fillRect(x,y,1,1);};
  const drawMatrix=(mat,offset,ctx)=>{
    mat.forEach((row,y)=>row.forEach((val,x)=>{
      if(val){drawSquare(x+offset.x,y+offset.y,colors[val],ctx);}
    }));
  };

  const rotate=(matrix)=>{
    const N=matrix.length;
    const rotated=matrix.map((_,i)=>matrix.map(row=>row[i]).reverse());
    return rotated;
  };

  const collide=(pos,mat)=>{
    for(let y=0;y<mat.length;++y){
      for(let x=0;x<mat[y].length;++x){
        if(mat[y][x]&&
           (board[y+pos.y]===undefined||
            board[y+pos.y][x+pos.x]===undefined||
            board[y+pos.y][x+pos.x])) return true;
      }
    }
    return false;
  };

  const merge=()=>{
    piece.shape.forEach((row,y)=>row.forEach((val,x)=>{
      if(val) board[y+piece.y][x+piece.x]=val;
    }));
  };

  const clearLines=()=>{
    outer:for(let y=ROWS-1;y>=0;--y){
      if(board[y].every(v=>v)){
        board.splice(y,1);
        board.unshift(Array(COLS).fill(0));
        ++lines;
        score+=(level+1)*100;
        ++y; // check same line again
      }
    }
    level=Math.floor(lines/10);
  };

  const resetPiece=()=>{
    piece={shape:shapes[next],x:Math.floor(COLS/2)-1,y:0,kind:next};
    next=createPiece();
    if(collide(piece,piece.shape)){gameOver();return;}
    canHold=true;
    drawNext();
    score+=4; // soft bonus
  };

  const drawNext=()=>{
    nctx.clearRect(0,0,4,4);
    drawMatrix(shapes[next],{x:1,y:1},nctx);
  };

  const draw=()=>{
    ctx.clearRect(0,0,COLS,ROWS);
    drawMatrix(board,{x:0,y:0},ctx);
    if(piece){
      // ghost
      const ghost={...piece};
      while(!collide({...ghost,y:ghost.y+1},ghost.shape)) ++ghost.y;
      ghost.shape.forEach((row,y)=>row.forEach((val,x)=>{
        if(val) drawSquare(x+ghost.x,y+ghost.y,'rgba(255,255,255,.2)',ctx);
      }));
      drawMatrix(piece.shape,piece,ctx);
    }
  };

  /* ---------- controls ---------- */
  document.addEventListener('keydown',e=>{
    if(!piece) return;
    if(e.code==='ArrowLeft' && !collide({...piece,x:piece.x-1},piece.shape)) piece.x--;
    else if(e.code==='ArrowRight' && !collide({...piece,x:piece.x+1},piece.shape)) piece.x++;
    else if(e.code==='ArrowDown' && !collide({...piece,y:piece.y+1},piece.shape)){piece.y++;score+=1;}
    else if(e.code==='ArrowUp'){
      const rotated=rotate(piece.shape);
      if(!collide(piece,rotated)) piece.shape=rotated;
    }else if(e.code==='Space'){
      while(!collide({...piece,y:piece.y+1},piece.shape)){piece.y++;score+=2;}
      playerDrop();
    }else if(e.code==='KeyC' && canHold){
      [hold,piece.kind]=[piece.kind,hold||createPiece()];
      piece.shape=shapes[piece.kind];
      piece.x=Math.floor(COLS/2)-1;
      piece.y=0;
      canHold=false;
      drawNext();
    }
  });

  const playerDrop=()=>{
    if(!piece) return;
    if(!collide({...piece,y:piece.y+1},piece.shape)) piece.y++;
    else{
      merge();
      clearLines();
      resetPiece();
    }
    draw();
    updateScore();
  };

  const updateScore=()=>{
    document.getElementById('tetris-score').textContent=score;
    document.getElementById('tetris-level').textContent=level;
    document.getElementById('tetris-lines').textContent=lines;
  };

  const gameOver=()=>{
    clearInterval(dropInterval);
    ctx.fillStyle='rgba(0,0,0,.6)';
    ctx.fillRect(0,0,COLS,ROWS);
    ctx.fillStyle='#fff';
    ctx.textAlign='center';
    ctx.font='1.2px sans-serif';
    ctx.fillText('GAME OVER',COLS/2,ROWS/2);
    ctx.fillText('Press R to restart',COLS/2,ROWS/2+1.5);
  };

  const start=()=>{
    board=Array.from({length:ROWS},()=>Array(COLS).fill(0));
    next=createPiece(); resetPiece();
    score=lines=level=0;
    updateScore();
    dropInterval=setInterval(playerDrop,1000/((level+1)*.5+1));
  };

  document.addEventListener('keydown',e=>{
    if((e.code==='KeyR' || e.code==='Space') && !dropInterval) start();
  });

  start();
})();</script></div><div class="post__tag__list"><ul><li><a href="/etc/tags/app/">#app</a></li><li><a href="/etc/tags/game/">#game</a></li><li><a href="/etc/tags/ai/">#ai</a></li></ul></div></div></div><div class="footer"><div class="footer__container"><div class="footer__column"><span class="footer__title">About</span><ul class="footer__list"><!-- <li><a href="/etc/imprint/">Imprint</a></li> --><li><a href="/etc/privacy-policy/">Privacy policy</a></li></ul></div></div></div></div></div><script>(()=>{const e=document.querySelectorAll('pre[class*="language"]'),t=["codeButton"];e.forEach(e=>{e.classList.add("relative");const n=document.createElement("button");n.classList.add(...t),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>',n.addEventListener("click",()=>{navigator.clipboard.writeText(e.textContent)}),e.appendChild(n)})})();{const e="dark",t="light",n="colorSchemeChanged",r=document.querySelector("body"),o=document.querySelector(".darkmode__text");o.addEventListener("click",function(){const c=r.classList.toggle("dark-mode"),s=c?e:t;sessionStorage.setItem("jec.color-scheme",s),o.innerHTML=c?"&starf;":"&star;",o.dispatchEvent(new CustomEvent(n,{detail:s}))})}{function init(){const e="dark",t=matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches;let n=sessionStorage.getItem("jec.color-scheme");n=!n&&t?e:n||"light",n===e&&document.querySelector(".darkmode__text").click()}init()}function itemToElement(e){var t=document.createElement("li"),n=document.createElement("a"),r=document.createElement("span"),o=document.createElement("span");return r.innerHTML=e.title,n.setAttribute("href",e.url),r.setAttribute("class","search__result__title"),n.appendChild(r),isEmpty(e.description)||(o.innerHTML=capitalize(e.description),o.setAttribute("class","search__result__desc"),n.appendChild(o)),t.appendChild(n),t}function isEmpty(e){return!e||0===e.length}function capitalize(e){return e&&e[0].toUpperCase()+e.slice(1)}function sortTable(e){var t,n,r,o,c,s,a=0;const l=document.querySelector(".category__table");for(t=!0,r="asc";t;){for(t=!1,o=l.rows,i=1;i<o.length-1;i++)if(n=!1,c=o[i].getElementsByTagName("TD")[e],s=o[i+1].getElementsByTagName("TD")[e],"asc"==r){if(c.innerHTML.toLowerCase()>s.innerHTML.toLowerCase()){n=!0;break}}else if("desc"==r&&c.innerHTML.toLowerCase()<s.innerHTML.toLowerCase()){n=!0;break}n?(o[i].parentNode.insertBefore(o[i+1],o[i]),t=!0,a++):0==a&&"asc"==r&&(r="desc",t=!0)}}!function(){const e=document.querySelector("#search-link").dataset.section,t=(document.documentElement.lang,document.querySelector("#search-link")),n=document.querySelector(".search__ui"),r=document.querySelector("#search__str"),o=document.querySelector(".search__results");var c;function s(){for(;o.firstChild;)o.removeChild(o.firstChild)}t.addEventListener("click",function(t){t.preventDefault(),fetch(`/${e}/search.json`).then(function(e){return e.json()}).then(function(e){c=e.search}).catch(function(e){console.log("something went wrong\n",e)});n.classList.toggle("search__toggle__off");r.focus(),r.addEventListener("keyup",function(e){var t=r.value;2<t.length?function(e){e=e.toLowerCase();var n=[];for(var r in c){-1!=c[r].text.indexOf(t)&&n.push(c[r])}for(var r in s(),n){const e=itemToElement(n[r]);o.appendChild(e)}}(t):s()})},!1)}(),console.log("hello world");</script></body></html>